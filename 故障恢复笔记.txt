先写日志文件再写数据库（未雨绸缪）
事务故障的恢复：
1、反向扫描日志文件
2、对该事务的更新操作执行逆操作
3、继续反向扫描日志文件，查找该事务的其他更新操作，并做同样处理
4、一直这样下去，直到读到该事务的开始标记
系统故障的恢复：
1、正向扫描日志文件
2、对Undo队列事务进行UNDO处理
3、对Redo队列事务进行REDO处理
利用检查点的恢复步骤
1、从重新开始文件中找到最后一个检查点记录在日志文件中的地址
2、由该地址在日志文件中找到最后一个检查点记录
3、由该检查点记录得到检查点建立时所有正在执行的事务清单：ACTIVE-LIST
    a、建立两个事务队列：UNDO-LIST和REDO-LIST
    b、把ACTIVE-LIST暂时放入UNDO-LIST队列，REDO队列暂为空
4、从检查点开始正向扫描日志文件，直到日志文件结束
5、对UNDO-LIST中的每个事务执行UNDO操作，对REDO-LIST中的每个事务执行REDO操作

小结：
1、、如果数据库只包含成功事务提交的结果，就说数据库处于一致性的状态。保证数据一致性是对数据库的最基本的要求
2、事务是数据库的逻辑工作单位
    DBMS保证系统中一切事务的原子性、一致性、隔离性、持续性
3、DBMS必须对事务故障、系统故障、和介质故障进行恢复
4、恢复中最经常用的技术：数据库转储和登记日志文件
5、恢复的基本原理：利用存储在后备副本、日志文件和数据库镜像中的冗余数据来重建数据库

常用恢复技术：
    事务故障的恢复：UNDO
系统故障的恢复：UNDO+REDO
介质故障的恢复：重装备份并恢复到一致性状态 + REDO
提高恢复效率的技术：
    检查点技术：
        可以提高系统故障的恢复效率
	可以在一定程度上提高了利用动态转储备份进行介质恢复的效率
    镜像技术：
        镜像及技术可以改善介质故障的恢复效率